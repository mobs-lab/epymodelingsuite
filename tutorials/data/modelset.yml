modelset:

  meta:
    description: "Vaccination scenarios for 2024"
    author: "Flu Modeling Suite"
    version: 1.0.0

  population_names:
    - US-MA
    - US-NY # or 'all'
  
  sampling:
    samplers:
      - strategy: grid
        parameters:
          - gamma
      - strategy: LHS
        n_samples: 100 # Total number of parameter sets we sample for. Only required for sampling methods (e.g., LHS).
        compartments:
          - L
          - I_symp
        parameters:
          - start_date
          - Rt
          - vaccine_effectiveness
    compartments:
      L:
        min: 0
        max: 0.25
      I_symp:
        min: 0
        max: 0.1
    parameters:
      start_date:
        # We set a reference date and add days sampled from a distribution
        type: date
        reference_date: 2024-10-01
        distribution:
          type: scipy
          name: randint
          args:
            - 0
            - 30
          kwargs:
      Rt:
        output_type: scalar
        distribution:
          type: scipy
          name: uniform
          args:
            - 0.0
            - 2.0
          kwargs:
          # some_other_param: 100
      vaccine_effectiveness:
        output_type: scalar
        distribution:
          type: scipy
          name: uniform
          args:
            - 0.0
            - 0.5
          kwargs:
          # some_other_param: 100
      some_parameter_with_custom_dist:
        output_type: scalar
        distribution:
          # To allow defining custom distribution, we set the 'type'
          type: custom
          name: my_custom_distribution # This would be defined by inheriting rv_continuous or rv_discrete
          args:
          kwargs:
            arg1: 0.1
            arg2: 0.5
          # some_other_param: 100
      gamma:
        output_type: scalar
        values:
          - 0.1
          - 0.2
          - 0.3
          - 0.4
          - 0.5

  calibration:
    strategy:
      name: SMC
      options: # strategy specific arguments in calibrate() function
        num_particles: 100
        num_generations: 5
    # Sampler options, passed directly when initializing ABCSampler
    distance_function: rmse # Default, but we could provide custom distance function
    observed_data_path: data/fludata.csv
    comparison:
      # Distance function will calculate the difference between observed and simulated data
      - observed: 'hospitalized' # column name from CSV
        simulation: # we sum these transitions to compare with observed data
          - 'Home_severe_to_Hospitalized_total'
          - 'Home_severe_to_Hospitalized_vax_total'
    parameters:
      start_date:
        # For 'date' types, we set a reference date and add days sampled from a distribution
        output_type: date
        reference_date: 2024-10-01
        prior:
          type: scipy
          name: randint
          args:
          - 0
          - 30
          kwargs:
      Rt:
        output_type: scalar # defaults to 'scalar'.
        prior:
          type: scipy
          name: uniform
          args:
            - 1.0
            - 2.0
          kwargs:
          # some_other_param: 100
      residual_immunity:
        output_type: scalar
        prior:
          type: scipy
          name: uniform
          args:
            - 0.02
            - 0.35
          kwargs:
          # some_other_param: 100
      vaccine_effectiveness:
        output_type: scalar
        prior:
          type: scipy
          name: uniform
          args:
            - 0.01
            - 0.5
          kwargs:
          # some_other_param: 100
    compartments: